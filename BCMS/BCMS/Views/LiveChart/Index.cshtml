<!DOCTYPE HTML>
<html>
<head>
    <script>
        window.onload = function () {

            // Initial Values
            var xValue = 0;
            var yValue = 10;
            var newDataCount = 1;
            dataPoints = [];

            var chart = new CanvasJS.Chart("chartContainer", {
                theme: "light2",
                title: {
                    text: "Live Temperature Update"
                },
                axisY: {
                    suffix: " °C",
                },
                data: [{
                    type: "spline",
                    yValueFormatString: "#,##0.## °C",
                    dataPoints: dataPoints
                }]
            });

            updateData();

            function addData(data) {
                if (newDataCount !== 1) {
                    $.each(data, function (key, value) {
                        dataPoints.push({ x: value.x, y: parseFloat(value.y) });
                        xValue++;
                        yValue = parseFloat(value.y);
                    });
                    newDataCount = 1;
                } else {
                    //dataPoints.shift();
                    dataPoints.push({ x: data[0].x, y: parseFloat(data[0].y) });
                    xValue++;
                    yValue = parseFloat(data[0].y);
                }
                chart.render();
                chart2.render();
                setTimeout(updateData, 3000);
                if (dataPoints.length > 20) {
                    dataPoints.shift();
                }
            }

            function updateData() {
                $.getJSON("json?xstart=" + xValue + "&ystart=" + yValue + "&length=" + newDataCount, addData);
            }


            // Initial Values
            var xValue2 = 0;
            var yValue2 = 10;
            var newDataCount2 = 1;
            dataPoints2 = [];

            var chart2 = new CanvasJS.Chart("chartContainer2", {
                theme: "light2",
                title: {
                    text: "Live Humidity Update"
                },
                axisY: {
                    suffix: " %",
                },
                data: [{
                    type: "spline",
                    yValueFormatString: "##,#0.## %",
                    dataPoints: dataPoints2
                }]
            });

            updateData2();

            function addData2(data) {
                if (newDataCount2 !== 1) {
                    $.each(data, function (key, value) {
                        dataPoints2.push({ x: value.x, y: parseFloat(value.y) });
                        xValue2++;
                        yValue2 = parseFloat(value.y);
                    });
                    newDataCount2 = 1;
                } else {
                    //dataPoints.shift();
                    dataPoints2.push({ x: data[0].x, y: parseFloat(data[0].y) });
                    xValue2++;
                    yValue2 = parseFloat(data[0].y);
                }
                chart2.render();
                setTimeout(updateData2, 3000);
                if (dataPoints2.length > 20) {
                    dataPoints2.shift();
                }
            }

            function updateData2() {
                $.getJSON("json2?xstart=" + xValue2 + "&ystart=" + yValue2 + "&length=" + newDataCount2, addData2);
            }
        }
        
    </script>


</head>
<body background=https://wallpapercave.com/wp/wp3205211.png>
    <p></p>
    <div id="chartContainer" style="height: 260px; width: 100%;"></div>
    <p></p>
    <p></p>
    <div id="chartContainer2" style="height: 260px; width: 100%;"></div>
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
</body>
</html>  

           